async function loadPage(t){try{const n="/"===t?"index.html":t.substring(1);let o="";const a=await fetch(n);if(!a.ok)throw new Error(`Arquivo não encontrado: ${n}`);const e=await a.text(),r=new DOMParser,i=r.parseFromString(e,"text/html");if(o=i.querySelector("main").innerHTML,mainContent.innerHTML=o,n.includes("projetos.html")){const t=await fetch("assets/gatos.json"),n=await t.json(),o=n.map(createCatCard).join(""),a=mainContent.querySelector(".card-grid");a&&(a.innerHTML=o)}n.includes("transparencia.html")&&initCharts(),initFormValidator(),initMasks()}catch(t){mainContent.innerHTML='<div class="container"><h1>Erro 404 - Página não encontrada</h1><p>Não conseguimos encontrar o recurso que você pediu.</p></div>',console.error("Erro detalhado:",t)}}function route(t){t.preventDefault();const n=t.target.closest("a");if(!n||n.href.startsWith("mailto:"))return;const o=new URL(n.href).pathname;window.location.pathname!==o&&(history.pushState({},"",o),loadPage(o))}import{createCatCard}from"./templates.js";import{initCharts}from"./charts.js";import{initFormValidator}from"./form-validator.js";import{initMasks}from"./masks.js";const mainContent=document.querySelector("main");export function initRouter(){document.body.addEventListener("click",t=>{const n=t.target.closest("a");n&&n.origin===window.location.origin&&route(t)}),window.addEventListener("popstate",()=>{loadPage(window.location.pathname)}),loadPage(window.location.pathname)}